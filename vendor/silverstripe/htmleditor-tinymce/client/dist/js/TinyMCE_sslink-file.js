!function(){"use strict";var t={64:function(t){t.exports=AssetAdminModalActions},145:function(t){t.exports=ReactDomClient},207:function(t){t.exports=Injector},502:function(t){t.exports=ShortcodeSerialiser},594:function(t){t.exports=React},643:function(t){t.exports=InsertMediaModal},669:function(t){t.exports=jQuery},671:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;const n=(t,e)=>t?`${t}.${e}`:e;window.ss=window.ss||{},window.ss.tinymceactions=window.ss.tinymceactions||new class{constructor(){this.actions={},this.editorCommandsToUrlTestsMap={},this.defaultCommand="sslinkexternal"}addAction(t,e,i){const o=e.priority||50,r=n(i,t),s=this.getActions(t,i,!0);return e.type="menuitem",e.hasOwnProperty("onclick")&&(e.onAction=e.onclick,delete e.onclick),s.find(t=>e.text===t.text)||(this.actions[r]=[...this.getActions(t,i,!1),{...e,priority:o}]),this}getActions(t,e,i=!0){let o=e&&!i||!this.actions[t]?[]:this.actions[t];const r=n(e,t);return e&&this.actions[r]&&(o=[...o,...this.actions[r]]),o}getSortedActions(t,e,n=!0){return this.getActions(t,e,n).sort((t,e)=>{const n=e.priority-t.priority;return n||(t.text.toLocaleLowerCase()>e.text.toLocaleLowerCase()?1:-1)})}addCommandWithUrlTest(t,e){return this.editorCommandsToUrlTestsMap[t]=e,this}setDefaultCommand(t){return this.defaultCommand=t,this}getDefaultCommand(){return this.defaultCommand}getEditorCommandFromUrl(t){let e=this.getDefaultCommand();const n=Object.keys(this.editorCommandsToUrlTestsMap).find(e=>this.editorCommandsToUrlTestsMap[e]&&this.editorCommandsToUrlTestsMap[e].test(t));return n&&(e=n),e}};e.default=window.ss.tinymceactions},815:function(t){t.exports=i18n}},e={};function n(i){var o=e[i];if(void 0!==o)return o.exports;var r=e[i]={exports:{}};return t[i](r,r.exports,n),r.exports}!function(){var t=u(n(815)),e=u(n(671)),i=u(n(594)),o=n(145),r=u(n(669)),s=u(n(502)),a=u(n(643)),l=c(n(207)),d=c(n(64));function c(t,e){if("function"==typeof WeakMap)var n=new WeakMap,i=new WeakMap;return(c=function(t,e){if(!e&&t&&t.__esModule)return t;var o,r,s={__proto__:null,default:t};if(null===t||"object"!=typeof t&&"function"!=typeof t)return s;if(o=e?i:n){if(o.has(t))return o.get(t);o.set(t,s)}for(const e in t)"default"!==e&&{}.hasOwnProperty.call(t,e)&&((r=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(t,e))&&(r.get||r.set)?o(s,e,r):s[e]=t[e]);return s})(t,e)}function u(t){return t&&t.__esModule?t:{default:t}}const f="sslinkfile",p={init(n){e.default.addAction("sslink",{text:t.default._t("TinyMCE.LINKLABEL_FILE","Link to a file"),onAction:t=>t.execCommand(f),priority:80},n.getParam("editorIdentifier")).addCommandWithUrlTest(f,/^\[file_link/),n.addCommand(f,()=>{(0,r.default)(`#${n.id}`).entwine("ss").openLinkFileDialog()})}},m="insert-link__dialog-wrapper--file",h=(0,l.loadComponent)(a.default);r.default.entwine("ss",t=>{t("textarea.htmleditor").entwine({openLinkFileDialog(){let e=t(`#${m}`);e.length||(e=t(`<div id="${m}" />`),t("body").append(e)),e.addClass("insert-link__dialog-wrapper"),e.setElement(this),e.open()}}),t(`.js-injector-boot #${m}`).entwine({ReactRoot:null,renderModal(t){const{dispatch:e}=l.default.reducer.store;e(d.initFormStack("insert-link","admin"));const n=this.getOriginalAttributes(),r=this.getFolderId(),s=this.getRequireLinkText();let a=this.getReactRoot();a||(a=(0,o.createRoot)(this[0]),this.setReactRoot(a)),a.render(i.default.createElement(h,{isOpen:t,type:"insert-link",folderId:r,onInsert:(...t)=>this.handleInsert(...t),onClosed:()=>{e(d.reset()),this.close()},title:!1,bodyClassName:"modal__dialog",className:"insert-link__dialog-wrapper--internal",fileAttributes:n,requireLinkText:s}))},buildAttributes(t){return{href:`${s.default.serialise({name:"file_link",properties:{id:t.ID}},!0)}${t.Anchor&&t.Anchor.length?`#${t.Anchor}`:""}`,target:t.TargetBlank?"_blank":"",title:t.Description}},getFolderId(){const t=this.getElement();if(!t)return null;const e=Number(t.data("config").upload_folder_id);return isNaN(e)?null:e},getOriginalAttributes(){const e=this.getElement().getEditor(),n=t(e.getSelectedNode()),i=(n.attr("href")||"").split("#");if(!i[0])return{};const o=s.default.match("file_link",!1,i[0]);return o?{ID:o.properties.id?parseInt(o.properties.id,10):0,Anchor:i[1]||"",Description:n.attr("title"),TargetBlank:!!n.attr("target")}:{}}})}),tinymce.PluginManager.add(f,t=>p.init(t))}()}();