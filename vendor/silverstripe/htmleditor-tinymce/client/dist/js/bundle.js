(function(){var __webpack_modules__={38:function(e,t,n){"use strict";var r,o=(r=n(121))&&r.__esModule?r:{default:r};document.addEventListener("DOMContentLoaded",()=>{(0,o.default)()})},121:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(207)),o=i(n(517));function i(e){return e&&e.__esModule?e:{default:e}}t.default=()=>{r.default.component.registerMany({TinyMceHtmlEditorField:o.default})}},160:function(e,t,n){"use strict";e.exports=function(){if("object"==typeof globalThis)return globalThis;var e;try{e=this||new Function("return this")()}catch(e){if("object"==typeof window)return window;if("object"==typeof self)return self;if(void 0!==n.g)return n.g}return e}()},207:function(e){"use strict";e.exports=Injector},227:function(__unused_webpack_module,__unused_webpack_exports,__webpack_require__){"use strict";var _jquery=_interopRequireDefault(__webpack_require__(669)),_lodash=_interopRequireDefault(__webpack_require__(912));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}const ss=void 0!==window.ss?window.ss:{};ss.editorWrappers.tinyMCE=function(){let editorID;return{init(e){editorID=e,this.create()},destroy(){tinymce.EditorManager.execCommand("mceRemoveEditor",!1,editorID)},getInstance(){return tinymce.EditorManager.get(editorID)},onopen(){},onclose(){},setHeight(e,t){if(void 0!==t&&e.target&&e.target.iframeElement){e.target.iframeElement.height=""!==t?"auto":t;const n=e.target.iframeElement.closest(".tox-sidebar-wrap");n&&(n.style.height=t)}},getRawConfig(){const e=`#${editorID}`;return(0,_jquery.default)(e).data("config")},getConfig(){const e=this.getRawConfig(),t=e.row_height?e.row_height:void 0,n=this;return e.selector=`#${editorID}`,e.setup=function(e){e.on("dirty",()=>{n.save()}),e.on("change",()=>{n.save()}),e.on("init",e=>{n.setHeight(e,t)}),e.on("ResizeEditor",e=>{n.setHeight(e,"")})},e},save(e={}){const t=this.getInstance();t.save(),e.silent||((0,_jquery.default)(t.getElement()).trigger("change"),t.getElement().dispatchEvent(new Event("input",{bubbles:!0})))},create(){let e,t,n;function r(r){const o=r.target;!e||(new Date-e)/100>500?(n=(0,_jquery.default)(o).scrollTop(),(0,_jquery.default)(".mce-floatpanel").css("opacity","0")):window.clearTimeout(t),e=new Date,t=window.setTimeout(()=>function(t,n){const r=(0,_jquery.default)(t).scrollTop();(0,_jquery.default)(".mce-floatpanel").each((e,t)=>{const o=parseFloat(t.style.top);(0,_jquery.default)(t).css("top",o-(r-n)+"px")}),(0,_jquery.default)(".mce-floatpanel").css("opacity","1"),e=void 0}(o,n),500)}const o=this.getConfig();void 0!==o.baseURL&&(tinymce.EditorManager.baseURL=o.baseURL),o.skin=o.skin||"silverstripe",tinymce.init(o).then(e=>{if(e.length>0&&e[0].container){(0,_jquery.default)(e[0].container).closest(".panel--scrollable").on("scroll",e=>r(e))}})},repaint(){},isDirty(){return this.getInstance().isDirty()},prepValueForChangeTracker(e){const t=_jquery.default.extend({forced_root_block:"p"},this.getRawConfig()),n=tinymce.html.Serializer(t),r=tinymce.html.DomParser(t);return n.serialize(r.parse(e))},getContent(){return this.getInstance().getContent()},getSelection(){return this.getInstance().selection.getSel().toString()||""},selectByCssSelector(e){const t=this.getInstance().getDoc(),n=t.getSelection(),r=new Range;let o=!1;(0,_jquery.default)(t).find(e).each(function(){o||(r.selectNode(this),n.removeAllRanges(),n.addRange(r),o=!0)})},getDOM(){return this.getInstance().getElement()},getContainer(){return this.getInstance().getContainer()},getSelectedNode(){return this.getInstance().selection.getNode()},selectNode(e){this.getInstance().selection.select(e)},setContent(e,t){this.getInstance().setContent(e,t)},insertContent(e,t){this.getInstance().insertContent(e,t)},replaceContent(e,t){this.getInstance().execCommand("mceReplaceContent",!1,e,t)},insertLink(e,t,n){if(n){n=n.replaceAll("<","&lt;").replaceAll(">","&gt;");const t=this.getInstance().dom.create("a",e,n);this.getInstance().selection.setNode(t)}else this.getInstance().execCommand("mceInsertLink",!1,e,t)},removeLink(){this.getInstance().execCommand("unlink",!1)},cleanLink(href,node){const settings=this.getConfig,cb=settings.urlconverter_callback,cu=tinyMCE.settings.convert_urls;return cb&&(href=eval(`${cb}(href, node, true);`)),cu&&href.match(new RegExp(`^${(0,_lodash.default)(tinyMCE.settings.document_base_url)}(.*)$`))&&(href=RegExp.$1),href.match(/^javascript:\s*mctmp/)&&(href=""),href},createBookmark(){return this.getInstance().selection.getBookmark()},moveToBookmark(e){this.getInstance().selection.moveToBookmark(e),this.getInstance().focus()},blur(){this.getInstance().selection.collapse()},addUndo(){this.getInstance().undoManager.add()}}},ss.editorWrappers.default=ss.editorWrappers.tinyMCE},256:function(e,t,n){var r=n(671),o=n(160);void 0===o.TinyMCEActionRegistrar&&(o.TinyMCEActionRegistrar=r),e.exports=r},517:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Component=void 0;var r=c(n(594)),o=c(n(921)),i=n(556),s=c(n(623));function c(e){return e&&e.__esModule?e:{default:e}}class a extends i.Component{constructor(e){super(e),this.state={isReady:!e.data.editorjs},this.inputRef=null,this.handleReady=this.handleReady.bind(this)}getInputProps(){return{...super.getInputProps(),...this.props.data.attributes,innerRef:e=>{this.inputRef=e}}}getEditorElement(){return document.getElementById(this.getInputProps().id)}getEditor(){return window.TinyMCE&&window.TinyMCE.get(this.getInputProps().id)}handleReady(){!window.TinyMCE&&window.tinymce&&(window.TinyMCE=window.tinymce),this.setState({isReady:!0})}registerChangeListener(){const e=this.getEditorElement();this.getEditor().on("change keyup",()=>{super.handleChange({target:e})})}renderDependencyScript(){return window.tinymce||window.TinyMCE?(setTimeout(()=>{this.handleReady()},0),null):r.default.createElement(o.default,{url:this.props.data.editorjs,onLoad:this.handleReady})}render(){return this.state.isReady?super.render():this.renderDependencyScript()}componentDidUpdate(e,t){const{isReady:n}=this.state;if(!n)return;n!==t.isReady&&setTimeout(()=>{const{document:e,jQuery:t}=window,n=t?t.Event("EntwineElementsAdded"):new Event("noop"),r=this.getEditorElement();n.targets=[r],t&&t(e).triggerHandler(n),this.registerChangeListener()},1);const{value:r}=this.props;if(r!==e.value){const e=new Event("change",{bubbles:!0});e.simulated=!0,e.value=r,this.inputRef.dispatchEvent(e)}}componentWillUnmount(){if(!this.state.isReady)return;const{document:e,jQuery:t}=window,n=t?t.Event("EntwineElementsRemoved"):new Event("noop"),r=this.getEditorElement(),o=this.getEditor();o&&o.save(),n.targets=[r],super.handleChange({target:r}),t&&t(e).triggerHandler(n)}}t.Component=a;t.default=(0,s.default)(a)},556:function(e){"use strict";e.exports=TextField},594:function(e){"use strict";e.exports=React},623:function(e){"use strict";e.exports=FieldHolder},669:function(e){"use strict";e.exports=jQuery},671:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const n=(e,t)=>e?`${e}.${t}`:t;window.ss=window.ss||{},window.ss.tinymceactions=window.ss.tinymceactions||new class{constructor(){this.actions={},this.editorCommandsToUrlTestsMap={},this.defaultCommand="sslinkexternal"}addAction(e,t,r){const o=t.priority||50,i=n(r,e),s=this.getActions(e,r,!0);return t.type="menuitem",t.hasOwnProperty("onclick")&&(t.onAction=t.onclick,delete t.onclick),s.find(e=>t.text===e.text)||(this.actions[i]=[...this.getActions(e,r,!1),{...t,priority:o}]),this}getActions(e,t,r=!0){let o=t&&!r||!this.actions[e]?[]:this.actions[e];const i=n(t,e);return t&&this.actions[i]&&(o=[...o,...this.actions[i]]),o}getSortedActions(e,t,n=!0){return this.getActions(e,t,n).sort((e,t)=>{const n=t.priority-e.priority;return n||(e.text.toLocaleLowerCase()>t.text.toLocaleLowerCase()?1:-1)})}addCommandWithUrlTest(e,t){return this.editorCommandsToUrlTestsMap[e]=t,this}setDefaultCommand(e){return this.defaultCommand=e,this}getDefaultCommand(){return this.defaultCommand}getEditorCommandFromUrl(e){let t=this.getDefaultCommand();const n=Object.keys(this.editorCommandsToUrlTestsMap).find(t=>this.editorCommandsToUrlTestsMap[t]&&this.editorCommandsToUrlTestsMap[t].test(e));return n&&(t=n),t}};t.default=window.ss.tinymceactions},912:function(e,t,n){var r="[object Symbol]",o=/[\\^$.*+?()[\]{}|]/g,i=RegExp(o.source),s="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,c="object"==typeof self&&self&&self.Object===Object&&self,a=s||c||Function("return this")(),u=Object.prototype.toString,d=a.Symbol,l=d?d.prototype:void 0,p=l?l.toString:void 0;function f(e){if("string"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&u.call(e)==r}(e))return p?p.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}e.exports=function(e){var t;return(e=null==(t=e)?"":f(t))&&i.test(e)?e.replace(o,"\\$&"):e}},921:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(594),s=(r=i)&&r.__esModule?r:{default:r},c=n(935);var a=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.scriptLoaderId="id"+n.constructor.idCount++,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.onError,n=e.onLoad,r=e.url;this.constructor.loadedScripts[r]?n():this.constructor.erroredScripts[r]?t():this.constructor.scriptObservers[r]?this.constructor.scriptObservers[r][this.scriptLoaderId]=this.props:(this.constructor.scriptObservers[r]=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},this.scriptLoaderId,this.props),this.createScript())}},{key:"componentWillUnmount",value:function(){var e=this.props.url,t=this.constructor.scriptObservers[e];t&&delete t[this.scriptLoaderId]}},{key:"createScript",value:function(){var e=this,t=this.props,n=t.onCreate,r=t.url,o=t.attributes,i=document.createElement("script");n(),o&&Object.keys(o).forEach(function(e){return i.setAttribute(e,o[e])}),i.src=r,i.hasAttribute("async")||(i.async=1);var s=function(t){var n=e.constructor.scriptObservers[r];Object.keys(n).forEach(function(o){t(n[o])&&delete e.constructor.scriptObservers[r][e.scriptLoaderId]})};i.onload=function(){e.constructor.loadedScripts[r]=!0,s(function(e){return e.onLoad(),!0})},i.onerror=function(){e.constructor.erroredScripts[r]=!0,s(function(e){return e.onError(),!0})},document.body.appendChild(i)}},{key:"render",value:function(){return null}}]),t}(s.default.Component);a.propTypes={attributes:c.PropTypes.object,onCreate:c.PropTypes.func,onError:c.PropTypes.func.isRequired,onLoad:c.PropTypes.func.isRequired,url:c.PropTypes.string.isRequired},a.defaultProps={attributes:{},onCreate:function(){},onError:function(){},onLoad:function(){}},a.scriptObservers={},a.loadedScripts={},a.erroredScripts={},a.idCount=0,t.default=a,e.exports=t.default},935:function(e){"use strict";e.exports=PropTypes}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](n,n.exports,__webpack_require__),n.exports}__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}();var __webpack_exports__={};!function(){"use strict";__webpack_require__(256),__webpack_require__(38),__webpack_require__(227)}()})();