!function(){"use strict";var t={127:function(t){t.exports=InsertLinkModal},145:function(t){t.exports=ReactDomClient},207:function(t){t.exports=Injector},594:function(t){t.exports=React},669:function(t){t.exports=jQuery},671:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;const i=(t,e)=>t?`${t}.${e}`:e;window.ss=window.ss||{},window.ss.tinymceactions=window.ss.tinymceactions||new class{constructor(){this.actions={},this.editorCommandsToUrlTestsMap={},this.defaultCommand="sslinkexternal"}addAction(t,e,n){const o=e.priority||50,s=i(n,t),r=this.getActions(t,n,!0);return e.type="menuitem",e.hasOwnProperty("onclick")&&(e.onAction=e.onclick,delete e.onclick),r.find(t=>e.text===t.text)||(this.actions[s]=[...this.getActions(t,n,!1),{...e,priority:o}]),this}getActions(t,e,n=!0){let o=e&&!n||!this.actions[t]?[]:this.actions[t];const s=i(e,t);return e&&this.actions[s]&&(o=[...o,...this.actions[s]]),o}getSortedActions(t,e,i=!0){return this.getActions(t,e,i).sort((t,e)=>{const i=e.priority-t.priority;return i||(t.text.toLocaleLowerCase()>e.text.toLocaleLowerCase()?1:-1)})}addCommandWithUrlTest(t,e){return this.editorCommandsToUrlTestsMap[t]=e,this}setDefaultCommand(t){return this.defaultCommand=t,this}getDefaultCommand(){return this.defaultCommand}getEditorCommandFromUrl(t){let e=this.getDefaultCommand();const i=Object.keys(this.editorCommandsToUrlTestsMap).find(e=>this.editorCommandsToUrlTestsMap[e]&&this.editorCommandsToUrlTestsMap[e].test(t));return i&&(e=i),e}};e.default=window.ss.tinymceactions},815:function(t){t.exports=i18n}},e={};function i(n){var o=e[n];if(void 0!==o)return o.exports;var s=e[n]={exports:{}};return t[n](s,s.exports,i),s.exports}!function(){var t=d(i(815)),e=d(i(671)),n=d(i(594)),o=i(145),s=d(i(669)),r=i(127),a=i(207);function d(t){return t&&t.__esModule?t:{default:t}}const l="sslinkemail",c={init(i){e.default.addAction("sslink",{text:t.default._t("TinyMCE.LINKLABEL_EMAIL","Link to email address"),onAction:t=>t.execCommand(l),priority:51},i.getParam("editorIdentifier")).addCommandWithUrlTest(l,/^mailto:/),i.addCommand(l,()=>{window.jQuery(`#${i.id}`).entwine("ss").openLinkEmailDialog()})}},m="insert-link__dialog-wrapper--email",u=(0,a.loadComponent)((0,r.createInsertLinkModal)("SilverStripe\\Admin\\LeftAndMain","EditorEmailLink"));s.default.entwine("ss",e=>{e("textarea.htmleditor").entwine({openLinkEmailDialog(){let t=e(`#${m}`);t.length||(t=e(`<div id="${m}" />`),e("body").append(t)),t.addClass("insert-link__dialog-wrapper"),t.setElement(this),t.open()}}),e(`#${m}`).entwine({ReactRoot:null,renderModal(e){const i=this.getOriginalAttributes(),s=this.getRequireLinkText();let r=this.getReactRoot();r||(r=(0,o.createRoot)(this[0]),this.setReactRoot(r)),r.render(n.default.createElement(u,{isOpen:e,onInsert:(...t)=>this.handleInsert(...t),onClosed:()=>this.close(),title:t.default._t("TinyMCE.LINK_EMAIL","Insert email link"),bodyClassName:"modal__dialog",className:"insert-link__dialog-wrapper--email",fileAttributes:i,identifier:"Admin.InsertLinkEmailModal",requireLinkText:s}))},getOriginalAttributes(){const t=this.getElement().getEditor(),i=e(t.getSelectedNode()),n=(i.attr("href")||"").split("?");let o=n[0].replace(/^mailto:/,"").split("?")[0];o.match(/.+@.+\..+/)||(o="");const s=n[1]?n[1].match(/subject=([^&]+)/):"";return{Link:o,Subject:s?decodeURIComponent(s[1]):"",Description:i.attr("title")}},buildAttributes(t){const e=this._super(t);let i="",n=e.href.replace(/^mailto:/,"").split("?")[0];return n.match(/.+@.+\..+/)||(n=""),n&&(i=`mailto:${n}`),i&&t.Subject&&(i=`${i}?subject=${encodeURIComponent(t.Subject)}`),e.href=i,delete e.target,e}})}),tinymce.PluginManager.add(l,t=>c.init(t))}()}();