!function(){var e={55:function(e){"use strict";e.exports=FormBuilderLoader},182:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version=t.validate=t.v7=t.v6ToV1=t.v6=t.v5=t.v4=t.v3=t.v1ToV6=t.v1=t.stringify=t.parse=t.NIL=t.MAX=void 0;var o=r(2196);Object.defineProperty(t,"MAX",{enumerable:!0,get:function(){return o.default}});var n=r(3465);Object.defineProperty(t,"NIL",{enumerable:!0,get:function(){return n.default}});var s=r(1797);Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return s.default}});var i=r(6011);Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return i.default}});var a=r(1425);Object.defineProperty(t,"v1",{enumerable:!0,get:function(){return a.default}});var l=r(6568);Object.defineProperty(t,"v1ToV6",{enumerable:!0,get:function(){return l.default}});var u=r(591);Object.defineProperty(t,"v3",{enumerable:!0,get:function(){return u.default}});var d=r(8286);Object.defineProperty(t,"v4",{enumerable:!0,get:function(){return d.default}});var c=r(4557);Object.defineProperty(t,"v5",{enumerable:!0,get:function(){return c.default}});var f=r(6356);Object.defineProperty(t,"v6",{enumerable:!0,get:function(){return f.default}});var p=r(268);Object.defineProperty(t,"v6ToV1",{enumerable:!0,get:function(){return p.default}});var m=r(4299);Object.defineProperty(t,"v7",{enumerable:!0,get:function(){return m.default}});var h=r(9746);Object.defineProperty(t,"validate",{enumerable:!0,get:function(){return h.default}});var v=r(2770);Object.defineProperty(t,"version",{enumerable:!0,get:function(){return v.default}})},268:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=r(1797),n=r(6011);t.default=function(e){const t=function(e){return Uint8Array.of((15&e[3])<<4|e[4]>>4&15,(15&e[4])<<4|(240&e[5])>>4,(15&e[5])<<4|15&e[6],e[7],(15&e[1])<<4|(240&e[2])>>4,(15&e[2])<<4|(240&e[3])>>4,16|(240&e[0])>>4,(15&e[0])<<4|(240&e[1])>>4,e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}("string"==typeof e?(0,o.default)(e):e);return"string"==typeof e?(0,n.unsafeStringify)(t):t}},338:function(e,t){"use strict";function r(e){return 14+(e+64>>>9<<4)+1}function o(e,t){const r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function n(e,t,r,n,s,i){return o((a=o(o(t,e),o(n,i)))<<(l=s)|a>>>32-l,r);var a,l}function s(e,t,r,o,s,i,a){return n(t&r|~t&o,e,t,s,i,a)}function i(e,t,r,o,s,i,a){return n(t&o|r&~o,e,t,s,i,a)}function a(e,t,r,o,s,i,a){return n(t^r^o,e,t,s,i,a)}function l(e,t,r,o,s,i,a){return n(r^(t|~o),e,t,s,i,a)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(e){const t=new Uint8Array(4*e.length);for(let r=0;r<4*e.length;r++)t[r]=e[r>>2]>>>r%4*8&255;return t}(function(e,t){const n=new Uint32Array(r(t)).fill(0);n.set(e),n[t>>5]|=128<<t%32,n[n.length-1]=t,e=n;let u=1732584193,d=-271733879,c=-1732584194,f=271733878;for(let t=0;t<e.length;t+=16){const r=u,n=d,p=c,m=f;u=s(u,d,c,f,e[t],7,-680876936),f=s(f,u,d,c,e[t+1],12,-389564586),c=s(c,f,u,d,e[t+2],17,606105819),d=s(d,c,f,u,e[t+3],22,-1044525330),u=s(u,d,c,f,e[t+4],7,-176418897),f=s(f,u,d,c,e[t+5],12,1200080426),c=s(c,f,u,d,e[t+6],17,-1473231341),d=s(d,c,f,u,e[t+7],22,-45705983),u=s(u,d,c,f,e[t+8],7,1770035416),f=s(f,u,d,c,e[t+9],12,-1958414417),c=s(c,f,u,d,e[t+10],17,-42063),d=s(d,c,f,u,e[t+11],22,-1990404162),u=s(u,d,c,f,e[t+12],7,1804603682),f=s(f,u,d,c,e[t+13],12,-40341101),c=s(c,f,u,d,e[t+14],17,-1502002290),d=s(d,c,f,u,e[t+15],22,1236535329),u=i(u,d,c,f,e[t+1],5,-165796510),f=i(f,u,d,c,e[t+6],9,-1069501632),c=i(c,f,u,d,e[t+11],14,643717713),d=i(d,c,f,u,e[t],20,-373897302),u=i(u,d,c,f,e[t+5],5,-701558691),f=i(f,u,d,c,e[t+10],9,38016083),c=i(c,f,u,d,e[t+15],14,-660478335),d=i(d,c,f,u,e[t+4],20,-405537848),u=i(u,d,c,f,e[t+9],5,568446438),f=i(f,u,d,c,e[t+14],9,-1019803690),c=i(c,f,u,d,e[t+3],14,-187363961),d=i(d,c,f,u,e[t+8],20,1163531501),u=i(u,d,c,f,e[t+13],5,-1444681467),f=i(f,u,d,c,e[t+2],9,-51403784),c=i(c,f,u,d,e[t+7],14,1735328473),d=i(d,c,f,u,e[t+12],20,-1926607734),u=a(u,d,c,f,e[t+5],4,-378558),f=a(f,u,d,c,e[t+8],11,-2022574463),c=a(c,f,u,d,e[t+11],16,1839030562),d=a(d,c,f,u,e[t+14],23,-35309556),u=a(u,d,c,f,e[t+1],4,-1530992060),f=a(f,u,d,c,e[t+4],11,1272893353),c=a(c,f,u,d,e[t+7],16,-155497632),d=a(d,c,f,u,e[t+10],23,-1094730640),u=a(u,d,c,f,e[t+13],4,681279174),f=a(f,u,d,c,e[t],11,-358537222),c=a(c,f,u,d,e[t+3],16,-722521979),d=a(d,c,f,u,e[t+6],23,76029189),u=a(u,d,c,f,e[t+9],4,-640364487),f=a(f,u,d,c,e[t+12],11,-421815835),c=a(c,f,u,d,e[t+15],16,530742520),d=a(d,c,f,u,e[t+2],23,-995338651),u=l(u,d,c,f,e[t],6,-198630844),f=l(f,u,d,c,e[t+7],10,1126891415),c=l(c,f,u,d,e[t+14],15,-1416354905),d=l(d,c,f,u,e[t+5],21,-57434055),u=l(u,d,c,f,e[t+12],6,1700485571),f=l(f,u,d,c,e[t+3],10,-1894986606),c=l(c,f,u,d,e[t+10],15,-1051523),d=l(d,c,f,u,e[t+1],21,-2054922799),u=l(u,d,c,f,e[t+8],6,1873313359),f=l(f,u,d,c,e[t+15],10,-30611744),c=l(c,f,u,d,e[t+6],15,-1560198380),d=l(d,c,f,u,e[t+13],21,1309151649),u=l(u,d,c,f,e[t+4],6,-145523070),f=l(f,u,d,c,e[t+11],10,-1120210379),c=l(c,f,u,d,e[t+2],15,718787259),d=l(d,c,f,u,e[t+9],21,-343485551),u=o(u,r),d=o(d,n),c=o(c,p),f=o(f,m)}return Uint32Array.of(u,d,c,f)}(function(e){if(0===e.length)return new Uint32Array;const t=new Uint32Array(r(8*e.length)).fill(0);for(let r=0;r<e.length;r++)t[r>>2]|=(255&e[r])<<r%4*8;return t}(e),8*e.length))}},420:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(r(5207)),n=r(9367),s=i(r(8330));function i(e){return e&&e.__esModule?e:{default:e}}t.default=()=>{o.default.reducer.register("versionedAdmin",(0,n.combineReducers)({historyViewer:s.default}))}},488:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Component=void 0;var o=function(e,t){if("function"==typeof WeakMap)var r=new WeakMap,o=new WeakMap;return function(e,t){if(!t&&e&&e.__esModule)return e;var n,s,i={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return i;if(n=t?o:r){if(n.has(e))return n.get(e);n.set(e,i)}for(const t in e)"default"!==t&&{}.hasOwnProperty.call(e,t)&&((s=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(s.get||s.set)?n(i,t,s):i[t]=e[t]);return i}(e,t)}(r(1594)),n=c(r(6923)),s=c(r(55)),i=r(5207),a=r(1339),l=c(r(6935)),u=c(r(7008)),d=c(r(7675));function c(e){return e&&e.__esModule?e:{default:e}}class f extends o.PureComponent{componentDidMount(){this.toggleToolbarClass(!0)}componentDidUpdate(){this.toggleToolbarClass("split"===this.props.previewState)}componentWillUnmount(){this.toggleToolbarClass(!1)}getListVersions(){const{compare:e,version:t}=this.props;return this.isCompareMode()?[e.versionTo,e.versionFrom]:[t]}isPreviewable(){const{isPreviewable:e}=this.props;return e&&!this.isCompareMode()}isCompareMode(){const{compare:e}=this.props;return e&&e.versionFrom&&e.versionTo}toggleToolbarClass(e=!0){const t=document.querySelector(".CMSPageHistoryViewerController div:not(.cms-content-tools) .cms-content-header"),r="history-viewer__toolbar--condensed";t&&this.isPreviewable()&&(e?t.classList.add(r):t.classList.remove(r))}renderPreview(){const{version:{absoluteLink:e,lastEdited:t,version:r},PreviewComponent:n,previewState:s}=this.props;if(!this.isPreviewable()||"edit"===s)return null;const i=u.default.parse(e),a=d.default.parse(i.query);a.archiveDate=t;const l=u.default.format({...i,search:d.default.stringify(a)});return o.default.createElement(n,{className:"history-viewer__preview flexbox-area-grow",itemLinks:{preview:{Stage:{href:l,type:"text/html"}}},itemId:r})}renderToolbar(){const{ToolbarComponent:e,isLatestVersion:t,isRevertable:r,recordId:n,version:s}=this.props;return this.isCompareMode()?null:o.default.createElement(e,{identifier:"HistoryViewer.VersionDetail.Toolbar",isLatestVersion:t,recordId:n,versionId:s.version,recordClass:this.props.recordClass,isPreviewable:this.isPreviewable(),isRevertable:r,onAfterRevert:this.props.onAfterRevert})}renderDetails(){const{compareModeAvailable:e,ListComponent:t,schemaUrl:r,CompareWarningComponent:i,previewState:a}=this.props;if(this.isPreviewable()&&"preview"===a)return null;const l={"history-viewer__table":!0,"history-viewer__table--current":!0,"history-viewer__table--compare":this.isCompareMode()},u={"history-viewer__version-detail":!0,"history-viewer__version-detail--compare":this.isCompareMode()};return o.default.createElement("div",{className:"flexbox-area-grow fill-height"},o.default.createElement(i,{fixed:!0}),o.default.createElement("div",{className:(0,n.default)(["flexbox-area-grow","panel","panel--scrollable","panel--padded","panel--padded-side"])},o.default.createElement(t,{extraClass:(0,n.default)(l),versions:this.getListVersions(),compareModeAvailable:e}),o.default.createElement("div",{className:(0,n.default)(u)},o.default.createElement(s.default,{identifier:"HistoryViewer.VersionDetail",schemaUrl:r}))),this.renderToolbar())}render(){return o.default.createElement("div",{className:"flexbox-area-grow fill-width"},this.renderDetails(),this.renderPreview())}}t.Component=f,f.propTypes={isLatestVersion:l.default.bool,isPreviewable:l.default.bool,isRevertable:l.default.bool,ListComponent:l.default.elementType.isRequired,PreviewComponent:l.default.elementType,recordId:l.default.number.isRequired,recordClass:l.default.string.isRequired,schemaUrl:l.default.string.isRequired,ToolbarComponent:l.default.elementType.isRequired,version:a.versionType,compare:l.default.oneOfType([l.default.shape({versionFrom:a.versionType,versionTo:a.versionType}),l.default.bool]),previewState:l.default.oneOf(["edit","preview","split"]),onAfterRevert:l.default.func.isRequired},f.defaultProps={isLatestVersion:!1,isPreviewable:!1,isRevertable:!1,compare:!1};t.default=(0,i.inject)(["HistoryViewerVersionList","HistoryViewerToolbar","Preview","HistoryViewerCompareWarning"],(e,t,r,o)=>({ListComponent:e,ToolbarComponent:t,PreviewComponent:r,CompareWarningComponent:o}),({version:e},t)=>`${t}.HistoryViewerVersionDetail.${e.Version}`)(f)},495:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Component=void 0;var o=d(r(5815)),n=function(e,t){if("function"==typeof WeakMap)var r=new WeakMap,o=new WeakMap;return function(e,t){if(!t&&e&&e.__esModule)return e;var n,s,i={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return i;if(n=t?o:r){if(n.has(e))return n.get(e);n.set(e,i)}for(const t in e)"default"!==t&&{}.hasOwnProperty.call(e,t)&&((s=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(s.get||s.set)?n(i,t,s):i[t]=e[t]);return i}(e,t)}(r(1594)),s=r(3556),i=r(5525),a=r(9367),l=r(9040),u=d(r(6935));function d(e){return e&&e.__esModule?e:{default:e}}class c extends n.Component{constructor(e){super(e),this.toggle=this.toggle.bind(this),this.handleCompareModeChange=this.handleCompareModeChange.bind(this),this.state={dropdownOpen:!1}}toggle(){this.setState(e=>({dropdownOpen:!e.dropdownOpen}))}handleCompareModeChange(){const{compareModeSelected:e,onCompareModeUnselect:t,onCompareModeSelect:r}=this.props;e?t():r()}renderDropdown(){const{compareModeAvailable:e,compareModeSelected:t}=this.props,{dropdownOpen:r}=this.state;return e?n.default.createElement(s.Dropdown,{isOpen:r,toggle:this.toggle,className:"history-viewer__actions-dropdown"},n.default.createElement(s.DropdownToggle,{className:"font-icon-sliders"}),n.default.createElement(s.DropdownMenu,{end:!0},n.default.createElement("div",{className:"form-check"},n.default.createElement("input",{id:"history-viewer-compare-two",type:"checkbox",className:"no-change-track history-viewer-heading__compare-mode-checkbox",checked:t,onChange:this.handleCompareModeChange}),n.default.createElement("label",{className:"form-label form-check-label",htmlFor:"history-viewer-compare-two"},o.default._t("HistoryViewerHeading.COMPARE_VERSIONS","Compare two versions"))))):null}render(){return n.default.createElement("li",{className:"history-viewer__heading",role:"row"},n.default.createElement("span",{className:"history-viewer__version-no",role:"columnheader"},"#"),n.default.createElement("span",{className:"history-viewer__version-state",role:"columnheader"},o.default._t("HistoryViewer.Record","Record")),n.default.createElement("span",{className:"history-viewer__author",role:"columnheader"},o.default._t("HistoryViewer.Author","Author")),n.default.createElement("span",{className:"history-viewer__actions",role:"columnheader"},this.renderDropdown()))}}t.Component=c,c.propTypes={compareModeAvailable:u.default.bool,compareModeSelected:u.default.bool,onCompareModeSelect:u.default.func,onCompareModeUnselect:u.default.func},c.defaultProps={compareModeAvailable:!0};t.default=(0,a.compose)((0,l.connect)(function(e){return{compareModeSelected:!!e.versionedAdmin.historyViewer.compare}},function(e){return{onCompareModeSelect(){e((0,i.setCompareMode)(!0))},onCompareModeUnselect(){e((0,i.setCompareMode)(!1))}}}))(c)},591:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.URL=t.DNS=void 0;const o=r(338),n=r(2988);var s=r(2988);function i(e,t,r,s){return(0,n.default)(48,o.default,e,t,r,s)}Object.defineProperty(t,"DNS",{enumerable:!0,get:function(){return s.DNS}}),Object.defineProperty(t,"URL",{enumerable:!0,get:function(){return s.URL}}),i.DNS=n.DNS,i.URL=n.URL,t.default=i},756:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Component=void 0;var o=function(e,t){if("function"==typeof WeakMap)var r=new WeakMap,o=new WeakMap;return function(e,t){if(!t&&e&&e.__esModule)return e;var n,s,i={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return i;if(n=t?o:r){if(n.has(e))return n.get(e);n.set(e,i)}for(const t in e)"default"!==t&&{}.hasOwnProperty.call(e,t)&&((s=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(s.get||s.set)?n(i,t,s):i[t]=e[t]);return i}(e,t)}(r(1594)),n=d(r(6923)),s=d(r(5815)),i=d(r(8123)),a=r(1339),l=r(5207),u=d(r(6935));function d(e){return e&&e.__esModule?e:{default:e}}class c extends o.Component{getClassNames(){const{extraClass:e}=this.props;return(0,n.default)("history-viewer__version-state",e)}getPublishedState(){const{version:e}=this.props;return 1===e.version?s.default._t("HistoryViewer.Created","Created"):e.published?e.deleted?e.draft?s.default._t("HistoryViewer.Archived","Archived"):s.default._t("HistoryViewer.Unpublished","Unpublished"):s.default._t("HistoryViewer.Published","Published"):s.default._t("HistoryViewer.Saved","Saved")}getDate(){return i.default.locale(s.default.detectLocale()),(0,i.default)(this.props.version.lastEdited).format("L LT")}getBadges(){const{version:e,isActive:t,BadgeComponent:r}=this.props;return e.liveVersion?o.default.createElement(r,{status:"success",message:s.default._t("HistoryViewer.BadgeLive","Live"),className:"",inverted:t}):""}render(){return o.default.createElement("span",{className:this.getClassNames(),role:"cell"},this.getPublishedState()," ",o.default.createElement("small",{className:"text-muted"},this.getDate()),this.getBadges())}}t.Component=c,c.propTypes={version:a.versionType,extraClass:u.default.string,isActive:u.default.bool,BadgeComponent:u.default.oneOfType([u.default.node,u.default.func]).isRequired},c.defaultProps={version:a.defaultVersion,extraClass:"",isActive:!1};t.default=(0,l.inject)(["Badge"],e=>({BadgeComponent:e}),({version:e})=>`HistoryViewer.HistoryViewerVersionState.${e.Version}`)(c)},1312:function(e,t,r){var o=r(5249),n=r(4160);void 0===n.HistoryViewer&&(n.HistoryViewer=o),e.exports=o},1339:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.versionType=t.defaultVersion=void 0;var o,n=(o=r(6935))&&o.__esModule?o:{default:o};const s=n.default.shape({firstName:n.default.string,surname:n.default.string});t.versionType=n.default.shape({version:n.default.number,absoluteLink:n.default.string,lastEdited:n.default.string,published:n.default.bool,draft:n.default.bool,deleted:n.default.bool,liveVersion:n.default.bool,latestDraftVersion:n.default.bool,publisher:s,author:s}),t.defaultVersion={version:0,absoluteLink:"",lastEdited:"",published:!1,draft:!0,deleted:!1,liveVersion:!1,latestDraftVersion:!1,publisher:{firstName:"",surname:""},author:{firstName:"",surname:""}}},1425:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateV1State=void 0;const o=r(2291),n=r(6011),s={};function i(e,t,r){return e.msecs??=-1/0,e.nsecs??=0,t===e.msecs?(e.nsecs++,e.nsecs>=1e4&&(e.node=void 0,e.nsecs=0)):t>e.msecs?e.nsecs=0:t<e.msecs&&(e.node=void 0),e.node||(e.node=r.slice(10,16),e.node[0]|=1,e.clockseq=16383&(r[8]<<8|r[9])),e.msecs=t,e}function a(e,t,r,o,n,s,i=0){if(e.length<16)throw new Error("Random bytes length must be >= 16");if(s){if(i<0||i+16>s.length)throw new RangeError(`UUID byte range ${i}:${i+15} is out of buffer bounds`)}else s=new Uint8Array(16),i=0;t??=Date.now(),r??=0,o??=16383&(e[8]<<8|e[9]),n??=e.slice(10,16);const a=(1e4*(268435455&(t+=122192928e5))+r)%4294967296;s[i++]=a>>>24&255,s[i++]=a>>>16&255,s[i++]=a>>>8&255,s[i++]=255&a;const l=t/4294967296*1e4&268435455;s[i++]=l>>>8&255,s[i++]=255&l,s[i++]=l>>>24&15|16,s[i++]=l>>>16&255,s[i++]=o>>>8|128,s[i++]=255&o;for(let e=0;e<6;++e)s[i++]=n[e];return s}t.updateV1State=i,t.default=function(e,t,r){let l;const u=e?._v6??!1;if(e){const t=Object.keys(e);1===t.length&&"_v6"===t[0]&&(e=void 0)}if(e)l=a(e.random??e.rng?.()??(0,o.default)(),e.msecs,e.nsecs,e.clockseq,e.node,t,r);else{const e=Date.now(),n=(0,o.default)();i(s,e,n),l=a(n,s.msecs,s.nsecs,u?void 0:s.clockseq,u?void 0:s.node,t,r)}return t??(0,n.unsafeStringify)(l)}},1594:function(e){"use strict";e.exports=React},1669:function(e){"use strict";e.exports=jQuery},1749:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Component=void 0;var o=function(e,t){if("function"==typeof WeakMap)var r=new WeakMap,o=new WeakMap;return function(e,t){if(!t&&e&&e.__esModule)return e;var n,s,i={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return i;if(n=t?o:r){if(n.has(e))return n.get(e);n.set(e,i)}for(const t in e)"default"!==t&&{}.hasOwnProperty.call(e,t)&&((s=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(s.get||s.set)?n(i,t,s):i[t]=e[t]);return i}(e,t)}(r(1594)),n=p(r(6935)),s=r(9367),i=r(9040),a=r(5207),l=r(1339),u=r(2348),d=p(r(5815)),c=p(r(6923)),f=r(5525);function p(e){return e&&e.__esModule?e:{default:e}}class m extends o.Component{constructor(e){super(e),this.handleClick=this.handleClick.bind(this),this.handleClose=this.handleClose.bind(this),this.handleCompare=this.handleCompare.bind(this),this.handleKeyUp=this.handleKeyUp.bind(this)}getAuthor(){const{version:e}=this.props;let t={};return e.published&&e.publisher?t=e.publisher:e.author&&(t=e.author),`${t.firstName||""} ${t.surname||""}`}getClassNames(){const{extraClass:e,isActive:t,compare:r,compare:{compareFrom:o,compareTo:n}}=this.props,s={"history-viewer__row":!0,"history-viewer__row--current":t,"history-viewer__row--comparison-selected":r&&!(o&&n)};return(0,c.default)(s,e)}handleKeyUp(e){13===e.keyCode&&this.handleClick()}handleClick(){const{onSelect:e,version:t,isActive:r,compare:o}=this.props;return r||e(t,o),!1}handleCompare(){const{onCompareMode:e,version:t}=this.props;e(t)}handleClose(){const{onSelect:e,version:t,compare:r,compare:{versionFrom:o}}=this.props;o&&o.version===t.version&&delete r.versionFrom,e(0,r)}renderCompareButton(){const{compareModeAvailable:e,compare:t,FormActionComponent:r}=this.props,n=d.default._t("HistoryViewerVersion.COMPARE","Compare");return!e||t?null:o.default.createElement(r,{onClick:this.handleCompare,title:n,buttonStyle:"outline-light",extraClass:"history-viewer__compare-button"},n)}renderClearButton(){const{FormActionComponent:e,isActive:t}=this.props;return t?o.default.createElement(e,{onClick:this.handleClose,icon:"cancel",attributes:{title:d.default._t("HistoryViewerVersion.CLOSE","Close")},title:null,buttonStyle:"outline-light",extraClass:"history-viewer__close-button"}):null}renderSelectedMessage(){const{isActive:e}=this.props;return e?o.default.createElement("span",{className:"history-viewer__selected-message"},d.default._t("HistoryViewerVersion.SELECTED","Already selected")):null}renderActions(){const{isActive:e,compare:t}=this.props;return e||t?o.default.createElement("span",{className:"history-viewer__actions",role:"cell"},this.renderCompareButton(),this.renderSelectedMessage(),this.renderClearButton()):o.default.createElement("span",{className:"history-viewer__actions",role:"cell"})}render(){const{version:e,isActive:t,StateComponent:r}=this.props,n=d.default._t("HistoryViewerVersion.GO_TO_VERSION","Go to version {version}");return o.default.createElement("li",{className:this.getClassNames(),role:"row"},o.default.createElement("span",{className:"history-viewer__version-link",role:"button",title:d.default.inject(n,{version:e.Version}),onClick:this.handleClick,onKeyUp:this.handleKeyUp,tabIndex:0},o.default.createElement("span",{className:"history-viewer__version-no",role:"cell"},e.version),o.default.createElement(r,{version:e,isActive:t}),o.default.createElement("span",{className:"history-viewer__author",role:"cell"},this.getAuthor()),this.renderActions()))}}t.Component=m,m.propTypes={extraClass:n.default.oneOfType([n.default.string,n.default.array,n.default.object]),version:l.versionType,isActive:n.default.bool,onSelect:n.default.func,onCompareMode:n.default.func,compare:u.compareType,compareModeAvailable:n.default.bool,StateComponent:n.default.elementType.isRequired,FormActionComponent:n.default.elementType.isRequired},m.defaultProps={isActive:!1,version:l.defaultVersion,compare:!1,compareModeAvailable:!0};t.default=(0,s.compose)((0,i.connect)(null,function(e){return{onSelect(t,r){const{versionFrom:o}=r;r?e(o?(0,f.setCompareTo)(t):(0,f.setCompareFrom)(t)):(e((0,f.showVersion)(t)),e((0,f.clearMessages)()))},onCompareMode(t){e((0,f.setCompareFrom)(t)),e((0,f.setCompareMode)(!0))}}}),(0,a.inject)(["HistoryViewerVersionState","FormAction"],(e,t)=>({StateComponent:e,FormActionComponent:t}),({version:e})=>{let t="VersionedAdmin.HistoryViewer.HistoryViewerVersion";return e&&(t+=`.${e.version}`),t}))(m)},1797:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=r(9746);t.default=function(e){if(!(0,o.default)(e))throw TypeError("Invalid UUID");let t;return Uint8Array.of((t=parseInt(e.slice(0,8),16))>>>24,t>>>16&255,t>>>8&255,255&t,(t=parseInt(e.slice(9,13),16))>>>8,255&t,(t=parseInt(e.slice(14,18),16))>>>8,255&t,(t=parseInt(e.slice(19,23),16))>>>8,255&t,(t=parseInt(e.slice(24,36),16))/1099511627776&255,t/4294967296&255,t>>>24&255,t>>>16&255,t>>>8&255,255&t)}},1887:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(r(1594)),n=i(r(6177)),s=r(5207);function i(e){return e&&e.__esModule?e:{default:e}}t.default=e=>{class t extends o.default.Component{getConfig(){return n.default.getSection("SilverStripe\\VersionedAdmin\\Controllers\\HistoryViewerController")}getSchemaUrlDetails(){const{compare:e}=this.props;return e?{formName:"compareForm",queryParts:["RecordVersionFrom=:from","RecordVersionTo=:to"]}:{formName:"versionForm",queryParts:["RecordVersion=:version"]}}getSchemaUrl(){const e=this.getConfig(),{formName:t,queryParts:r}=this.getSchemaUrlDetails();return`${`${e.form[t].schemaUrl}/:id`}?${r.concat("RecordClass=:class&RecordID=:id").join("&")}`}render(){const t={...this.props,config:this.getConfig(),HistoryViewer:e,schemaUrl:this.getSchemaUrl()};return o.default.createElement(e,t)}}return(0,s.inject)(["HistoryViewer"])(t)}},2038:function(e,t,r){"use strict";var o=s(r(4121)),n=s(r(420));function s(e){return e&&e.__esModule?e:{default:e}}window.document.addEventListener("DOMContentLoaded",()=>{(0,o.default)(),(0,n.default)()})},2196:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default="ffffffff-ffff-ffff-ffff-ffffffffffff"},2291:function(e,t){"use strict";let r;Object.defineProperty(t,"__esModule",{value:!0});const o=new Uint8Array(16);t.default=function(){if(!r){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");r=crypto.getRandomValues.bind(crypto)}return r(o)}},2348:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultCompare=t.compareType=void 0;var o,n=(o=r(6935))&&o.__esModule?o:{default:o},s=r(1339);t.compareType=n.default.oneOfType([n.default.bool,n.default.shape({versionFrom:s.versionType,versionTo:s.versionType})]),t.defaultCompare=!1},2413:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=["SHOW_VERSION","SHOW_LIST","SET_CURRENT_PAGE","ADD_MESSAGE","CLEAR_MESSAGES","SET_COMPARE_MODE","SET_COMPARE_FROM","SET_COMPARE_TO"].reduce((e,t)=>Object.assign(e,{[t]:`HISTORY_VIEWER.${t}`}),{})},2770:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=r(9746);t.default=function(e){if(!(0,o.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}},2829:function(e,t){"use strict";function r(e,t,r,o){switch(e){case 0:return t&r^~t&o;case 1:case 3:return t^r^o;case 2:return t&r^t&o^r&o}}function o(e,t){return e<<t|e>>>32-t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520],s=new Uint8Array(e.length+1);s.set(e),s[e.length]=128;const i=(e=s).length/4+2,a=Math.ceil(i/16),l=new Array(a);for(let t=0;t<a;++t){const r=new Uint32Array(16);for(let o=0;o<16;++o)r[o]=e[64*t+4*o]<<24|e[64*t+4*o+1]<<16|e[64*t+4*o+2]<<8|e[64*t+4*o+3];l[t]=r}l[a-1][14]=8*(e.length-1)/Math.pow(2,32),l[a-1][14]=Math.floor(l[a-1][14]),l[a-1][15]=8*(e.length-1)&4294967295;for(let e=0;e<a;++e){const s=new Uint32Array(80);for(let t=0;t<16;++t)s[t]=l[e][t];for(let e=16;e<80;++e)s[e]=o(s[e-3]^s[e-8]^s[e-14]^s[e-16],1);let i=n[0],a=n[1],u=n[2],d=n[3],c=n[4];for(let e=0;e<80;++e){const n=Math.floor(e/20),l=o(i,5)+r(n,a,u,d)+c+t[n]+s[e]>>>0;c=d,d=u,u=o(a,30)>>>0,a=i,i=l}n[0]=n[0]+i>>>0,n[1]=n[1]+a>>>0,n[2]=n[2]+u>>>0,n[3]=n[3]+d>>>0,n[4]=n[4]+c>>>0}return Uint8Array.of(n[0]>>24,n[0]>>16,n[0]>>8,n[0],n[1]>>24,n[1]>>16,n[1]>>8,n[1],n[2]>>24,n[2]>>16,n[2]>>8,n[2],n[3]>>24,n[3]>>16,n[3]>>8,n[3],n[4]>>24,n[4]>>16,n[4]>>8,n[4])}},2988:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.URL=t.DNS=t.stringToBytes=void 0;const o=r(1797),n=r(6011);function s(e){e=unescape(encodeURIComponent(e));const t=new Uint8Array(e.length);for(let r=0;r<e.length;++r)t[r]=e.charCodeAt(r);return t}t.stringToBytes=s,t.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",t.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",t.default=function(e,t,r,i,a,l){const u="string"==typeof r?s(r):r,d="string"==typeof i?(0,o.default)(i):i;if("string"==typeof i&&(i=(0,o.default)(i)),16!==i?.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let c=new Uint8Array(16+u.length);if(c.set(d),c.set(u,d.length),c=t(c),c[6]=15&c[6]|e,c[8]=63&c[8]|128,a){l=l||0;for(let e=0;e<16;++e)a[l+e]=c[e];return a}return(0,n.unsafeStringify)(c)}},3465:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default="00000000-0000-0000-0000-000000000000"},3556:function(e){"use strict";e.exports=Reactstrap},3694:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Component=void 0;var o=function(e,t){if("function"==typeof WeakMap)var r=new WeakMap,o=new WeakMap;return function(e,t){if(!t&&e&&e.__esModule)return e;var n,s,i={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return i;if(n=t?o:r){if(n.has(e))return n.get(e);n.set(e,i)}for(const t in e)"default"!==t&&{}.hasOwnProperty.call(e,t)&&((s=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(s.get||s.set)?n(i,t,s):i[t]=e[t]);return i}(e,t)}(r(1594)),n=p(r(6935)),s=r(9367),i=r(9040),a=p(r(5815)),l=r(5207),u=p(r(5609)),d=p(r(6177)),c=p(r(4014)),f=r(5525);function p(e){return e&&e.__esModule?e:{default:e}}class m extends o.Component{constructor(e){super(e),this.handleRevert=this.handleRevert.bind(this),this.state={isReverting:!1}}handleRevert(){const{onAfterRevert:e,recordId:t,versionId:r,recordClass:o}=this.props,n=d.default.getSection("SilverStripe\\VersionedAdmin\\Controllers\\HistoryViewerController").endpoints.revert;this.setState({isReverting:!0}),u.default.post(n,{id:t,toVersion:r,dataClass:o},{"X-SecurityID":d.default.get("SecurityID")}).then(()=>{this.props.showToolbarSuccessMessage(r),e()}).catch(async e=>{const t=await(0,c.default)(e);this.props.actions.toasts.error(t)})}render(){const{FormActionComponent:e,ViewModeComponent:t,isLatestVersion:r,isPreviewable:n,isRevertable:s}=this.props,{isReverting:i}=this.state;let l="";return i?l=a.default._t("HistoryViewerToolbar.REVERT_IN_PROGRESS","Revert in progress..."):r&&(l=a.default._t("HistoryViewerToolbar.REVERT_UNAVAILABLE","Unavailable for the current version")),o.default.createElement("div",{className:"toolbar toolbar--south"},o.default.createElement("div",{className:"btn-toolbar"},s&&o.default.createElement(e,{onClick:this.handleRevert,icon:"back-in-time",name:"revert",attributes:{title:l},data:{buttonStyle:"warning"},disabled:r||i,loading:i,title:a.default._t("HistoryViewerToolbar.REVERT_TO_VERSION","Revert to this version")}),n&&o.default.createElement(t,{id:"history-viewer-edit-mode",area:"edit"})))}}t.Component=m,m.propTypes={actions:n.default.shape({revertToVersion:n.default.func.isRequired}),FormActionComponent:n.default.elementType.isRequired,ViewModeComponent:n.default.elementType.isRequired,isLatestVersion:n.default.bool,isPreviewable:n.default.bool,isRevertable:n.default.bool,onAfterRevert:n.default.func,recordId:n.default.number.isRequired,versionId:n.default.number.isRequired,recordClass:n.default.string.isRequired},m.defaultProps={isLatestVersion:!1,isPreviewable:!1,isRevertable:!1,showToolbarSuccessMessage:()=>{}};t.default=(0,s.compose)((0,i.connect)(null,function(e){return{showToolbarSuccessMessage(t){e((0,f.addMessage)(a.default.sprintf(a.default._t("HistoryViewerToolbar.REVERTED_MESSAGE","Successfully reverted to version %s"),t))),e((0,f.showList)())}}}),(0,l.inject)(["FormAction","ViewModeToggle"],(e,t)=>({FormActionComponent:e,ViewModeComponent:t}),()=>"VersionedAdmin.HistoryViewer.Toolbar"))(m)},3779:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r="undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);t.default={randomUUID:r}},4014:function(e){"use strict";e.exports=getJsonErrorMessage},4121:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=f(r(5207)),n=f(r(5249)),s=f(r(495)),i=f(r(3694)),a=f(r(1749)),l=f(r(488)),u=f(r(6937)),d=f(r(756)),c=f(r(7900));function f(e){return e&&e.__esModule?e:{default:e}}t.default=()=>{o.default.component.registerMany({HistoryViewer:n.default,HistoryViewerHeading:s.default,HistoryViewerToolbar:i.default,HistoryViewerVersion:a.default,HistoryViewerVersionDetail:l.default,HistoryViewerVersionList:u.default,HistoryViewerVersionState:d.default,HistoryViewerCompareWarning:c.default})}},4160:function(e,t,r){"use strict";e.exports=function(){if("object"==typeof globalThis)return globalThis;var e;try{e=this||new Function("return this")()}catch(e){if("object"==typeof window)return window;if("object"==typeof self)return self;if(void 0!==r.g)return r.g}return e}()},4299:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateV7State=void 0;const o=r(2291),n=r(6011),s={};function i(e,t,r){return e.msecs??=-1/0,e.seq??=0,t>e.msecs?(e.seq=r[6]<<23|r[7]<<16|r[8]<<8|r[9],e.msecs=t):(e.seq=e.seq+1|0,0===e.seq&&e.msecs++),e}function a(e,t,r,o,n=0){if(e.length<16)throw new Error("Random bytes length must be >= 16");if(o){if(n<0||n+16>o.length)throw new RangeError(`UUID byte range ${n}:${n+15} is out of buffer bounds`)}else o=new Uint8Array(16),n=0;return t??=Date.now(),r??=127*e[6]<<24|e[7]<<16|e[8]<<8|e[9],o[n++]=t/1099511627776&255,o[n++]=t/4294967296&255,o[n++]=t/16777216&255,o[n++]=t/65536&255,o[n++]=t/256&255,o[n++]=255&t,o[n++]=112|r>>>28&15,o[n++]=r>>>20&255,o[n++]=128|r>>>14&63,o[n++]=r>>>6&255,o[n++]=r<<2&255|3&e[10],o[n++]=e[11],o[n++]=e[12],o[n++]=e[13],o[n++]=e[14],o[n++]=e[15],o}t.updateV7State=i,t.default=function(e,t,r){let l;if(e)l=a(e.random??e.rng?.()??(0,o.default)(),e.msecs,e.seq,t,r);else{const e=Date.now(),n=(0,o.default)();i(s,e,n),l=a(n,s.msecs,s.seq,t,r)}return t??(0,n.unsafeStringify)(l)}},4506:function(e,t,r){var o=r(1339),n=r(4160);void 0===n.versionType&&(n.versionType=o),e.exports=o},4557:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.URL=t.DNS=void 0;const o=r(2829),n=r(2988);var s=r(2988);function i(e,t,r,s){return(0,n.default)(80,o.default,e,t,r,s)}Object.defineProperty(t,"DNS",{enumerable:!0,get:function(){return s.DNS}}),Object.defineProperty(t,"URL",{enumerable:!0,get:function(){return s.URL}}),i.DNS=n.DNS,i.URL=n.URL,t.default=i},5086:function(e,t,r){"use strict";var o=n(r(5815));function n(e){return e&&e.__esModule?e:{default:e}}n(r(1669)).default.entwine("ss",e=>{e(".cms-edit-form .btn-toolbar #Form_ItemEditForm_action_doUnpublish").entwine({onclick(e){const t=o.default._t("VersionedEditForm.PUBLISH_CONFIRM_MESSAGE","Are you sure you want to remove your record from the published site?\n\nThis record will still be available in the CMS as draft.");return!!confirm(t)&&(this.parents("form:first").addClass("loading"),this._super(e))}}),e(".cms-edit-form .btn-toolbar #Form_ItemEditForm_action_doArchive").entwine({onclick(e){const t=o.default._t("VersionedEditForm.ARCHIVE_CONFIRM_MESSAGE","Warning: This record will be unpublished before being sent to the archive.\n\nAre you sure you want to proceed?");return!!confirm(t)&&(this.parents("form:first").addClass("loading"),this._super(e))}})})},5125:function(e){"use strict";e.exports=ssUrlLib},5140:function(e,t,r){"use strict";var o=a(r(1669)),n=a(r(1594)),s=r(5145),i=r(5207);function a(e){return e&&e.__esModule?e:{default:e}}o.default.entwine("ss",e=>{e(".js-injector-boot .history-viewer__container").entwine({ReactRoot:null,onmatch(){const e=this.closest(".cms-content").attr("id"),t=e?{context:e}:{},r=(0,i.loadComponent)("HistoryViewer",t),o=this.data("schema"),a={...o.data,isInGridField:o.data.isInGridField||!this.hasClass("history-viewer--standalone")},l=(0,s.createRoot)(this[0]);l.render(n.default.createElement(r,a)),this.setReactRoot(l)},onunmatch(){const e=this.getReactRoot();e&&(e.unmount(),this.setReactRoot(null))}}),e(".history-viewer__version-detail .nav-link").entwine({onclick(e){e.preventDefault(),this._super(e)}}),e(".tab.tab--history-viewer[aria-hidden=false]").entwine({onmatch(){e(".toolbar--south.cms-content-actions").hide()},onunmatch(){e(".toolbar--south.cms-content-actions").show()}}),e(".tab.tab--history-viewer .history-viewer__version-detail").entwine({onmatch(){this.parent().css("padding-bottom","3rem").next(".toolbar--south").css({position:"absolute",bottom:0,left:0,right:0})}})})},5145:function(e){"use strict";e.exports=ReactDomClient},5207:function(e){"use strict";e.exports=Injector},5249:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Component=void 0;var o=M(r(1594)),n=r(9367),s=r(9040),i=C(r(5950)),a=C(r(1887)),l=r(5207),u=C(r(5609)),d=C(r(6177)),c=C(r(4014)),f=C(r(7089)),p=r(5525),m=r(1339),h=r(2348),v=C(r(6923)),y=C(r(9923)),b=M(r(9032)),g=M(r(8918)),_=C(r(6935)),w=C(r(5815));function C(e){return e&&e.__esModule?e:{default:e}}function M(e,t){if("function"==typeof WeakMap)var r=new WeakMap,o=new WeakMap;return(M=function(e,t){if(!t&&e&&e.__esModule)return e;var n,s,i={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return i;if(n=t?o:r){if(n.has(e))return n.get(e);n.set(e,i)}for(const t in e)"default"!==t&&{}.hasOwnProperty.call(e,t)&&((s=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(s.get||s.set)?n(i,t,s):i[t]=e[t]);return i})(e,t)}class V extends o.Component{constructor(e){super(e),this.handleSetPage=this.handleSetPage.bind(this),this.handleAfterRevert=this.handleAfterRevert.bind(this),this.refreshVersionData=this.refreshVersionData.bind(this),this.state={versions:[],totalCount:0}}componentDidMount(){this.refreshVersionData();const{graphQLErrors:e,toastActions:t}=this.props;e.length>0&&t.error(w.default._t("Admin.UNKNOWN_ERROR","An unknown error has occurred."))}componentDidUpdate(e){e.graphQLErrors.length<this.props.graphQLErrors.length&&this.props.toastActions.error(w.default._t("Admin.UNKNOWN_ERROR","An unknown error has occurred.")),0!==this.state.versions.length&&e.page!==this.props.page&&this.refreshVersionData()}componentWillUnmount(){const{onSelect:e}=this.props;"function"==typeof e&&e(0)}refreshVersionData(){if(!this.props.recordId)return;const e=`${d.default.getSection("SilverStripe\\VersionedAdmin\\Controllers\\HistoryViewerController").endpoints.read}?dataClass=${this.props.recordClass}&id=${this.props.recordId}&page=${this.props.page}`;u.default.get(e).then(e=>e.json()).then(e=>{this.setState({versions:e.versions,totalCount:e.pageInfo.totalCount})}).catch(async e=>{const t=await(0,c.default)(e);this.props.actions.toasts.error(t)})}getContainerClasses(){const{compare:e,isInGridField:t}=this.props;return(0,v.default)("history-viewer","fill-height","panel--scrollable",{"history-viewer__compare-mode":e,"history-viewer--no-margins":t&&!this.isListView()})}getLatestVersion(){const{currentVersion:e}=this.props;if(e&&!0===e.latestDraftVersion)return e;const t=this.state.versions.filter(e=>!0===e.latestDraftVersion);return t.length?t[0]:null}isListView(){const{compare:e,currentVersion:t}=this.props;return!t||!!e&&!(!e.versionFrom||e.versionTo)}handleSetPage(e){const{onSetPage:t}=this.props;"function"==typeof t&&t(e)}handleAfterRevert(){-1!==window.location.href.indexOf("/admin/pages/history/show/")?this.refreshVersionData():setTimeout(()=>window.location.reload(),1500)}compareModeAvailable(){return this.state.versions.length>1}renderVersionDetail(){const{currentVersion:e,isPreviewable:t,isRevertable:r,recordId:n,recordClass:s,schemaUrl:i,VersionDetailComponent:a,compare:l,compare:{versionFrom:u=!1,versionTo:d=!1},previewState:c}=this.props,f={":id":n,":class":s,":version":e.version},p={":id":n,":class":s,":from":u.version||0,":to":d.version||0},m=l?/:id|:class|:from|:to/g:/:id|:class|:version/g,h=l?p:f,v=l?u:e,b=this.getLatestVersion(),g={isLatestVersion:!l&&b&&b.version===v.version,isPreviewable:t,isRevertable:r,recordId:n,schemaUrl:i.replace(m,e=>h[e]),version:v,compare:l,compareModeAvailable:this.compareModeAvailable(),previewState:c,recordClass:this.props.recordClass,onAfterRevert:this.handleAfterRevert};return o.default.createElement(y.default,{className:this.getContainerClasses(),onResize:({width:e})=>this.props.onResize(e)},o.default.createElement(a,g))}renderPagination(){const e=this.state.totalCount,t=this.props.limit;if(0===this.state.versions.length||e<=t)return null;const r={totalItems:e,maxItemsPerPage:t,currentPage:this.props.page,onChangePage:this.handleSetPage};return o.default.createElement(i.default,r)}renderComparisonSelectionList(){const{compare:{versionFrom:e},ListComponent:t}=this.props;if(!e)return null;const r=(0,v.default)("history-viewer__table","history-viewer__table--comparison-selected");return o.default.createElement(t,{versions:[e],extraClass:r})}renderVersionList(){const{isInGridField:e,ListComponent:t,CompareWarningComponent:r,compare:n,compare:{versionFrom:s}}=this.props;return o.default.createElement("div",{className:this.getContainerClasses()},o.default.createElement(r,null),o.default.createElement("div",{className:e?"":"panel panel--padded panel--scrollable"},this.renderComparisonSelectionList(),o.default.createElement(t,{versions:this.state.versions,showHeader:!n||n&&!s,compareModeAvailable:this.compareModeAvailable()}),o.default.createElement("div",{className:"history-viewer__pagination"},this.renderPagination())))}renderCompareMode(){const{compare:e}=this.props;return e&&e.versionFrom&&e.versionTo?this.renderVersionDetail():this.renderVersionList()}render(){const{graphQLErrors:e,loading:t,compare:r,currentVersion:n,recordId:s}=this.props;return e.length>0?null:s?t?o.default.createElement(f.default,null):this.compareModeAvailable()&&r?this.renderCompareMode():n?this.renderVersionDetail():this.renderVersionList():null}}t.Component=V,V.propTypes={loading:_.default.bool,graphQLErrors:_.default.arrayOf(_.default.string),contextKey:_.default.string,limit:_.default.number,ListComponent:_.default.elementType.isRequired,offset:_.default.number,recordId:_.default.number,currentVersion:_.default.oneOfType([_.default.bool,m.versionType]),compare:h.compareType,isInGridField:_.default.bool,isPreviewable:_.default.bool,isRevertable:_.default.bool,VersionDetailComponent:_.default.elementType.isRequired,CompareWarningComponent:_.default.elementType.isRequired,page:_.default.number,schemaUrl:_.default.string,previewState:_.default.oneOf(["edit","preview","split"]),actions:_.default.object,onSelect:_.default.func,onSetPage:_.default.func,onResize:_.default.func,toastActions:_.default.shape({display:_.default.func,info:_.default.func,success:_.default.func,warning:_.default.func,error:_.default.func})},V.defaultProps={loading:!1,graphQLErrors:[],compare:{},contextKey:"",currentVersion:!1,isInGridField:!1,isPreviewable:!1,schemaUrl:""};t.default=(0,n.compose)((0,s.connect)(function(e){const{currentPage:t,currentVersion:r,compare:o}=e.versionedAdmin.historyViewer,{activeState:n}=e.viewMode;return{page:t,currentVersion:r,compare:o,previewState:n}},function(e){return{onSelect(t){e((0,p.showVersion)(t)),e((0,p.clearMessages)())},onSetPage(t){e((0,p.setCurrentPage)(t))},onResize(t){e(b.enableOrDisableSplitMode(t))},toastActions:(0,n.bindActionCreators)(g,e)}}),a.default,(0,l.inject)(["HistoryViewerVersionList","HistoryViewerVersionDetail","HistoryViewerCompareWarning"],(e,t,r)=>({ListComponent:e,VersionDetailComponent:t,CompareWarningComponent:r}),({contextKey:e})=>`VersionedAdmin.HistoryViewer.${e}`))(V)},5525:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addMessage=function(e,t="success"){return{type:s.default.ADD_MESSAGE,payload:{id:(0,n.v1)(),message:e,type:t}}},t.clearMessages=function(){return{type:s.default.CLEAR_MESSAGES}},t.setCompareFrom=function(e){return{type:s.default.SET_COMPARE_FROM,payload:{version:e}}},t.setCompareMode=function(e){return{type:s.default.SET_COMPARE_MODE,payload:{enabled:e}}},t.setCompareTo=function(e){return{type:s.default.SET_COMPARE_TO,payload:{version:e}}},t.setCurrentPage=function(e){return{type:s.default.SET_CURRENT_PAGE,payload:{page:e}}},t.showList=function(){return{type:s.default.SHOW_LIST}},t.showVersion=function(e){return{type:s.default.SHOW_VERSION,payload:{version:e}}};var o,n=r(182),s=(o=r(2413))&&o.__esModule?o:{default:o}},5609:function(e){"use strict";e.exports=Backend},5815:function(e){"use strict";e.exports=i18n},5950:function(e){"use strict";e.exports=Paginator},6011:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unsafeStringify=void 0;const o=r(9746),n=[];for(let e=0;e<256;++e)n.push((e+256).toString(16).slice(1));function s(e,t=0){return(n[e[t+0]]+n[e[t+1]]+n[e[t+2]]+n[e[t+3]]+"-"+n[e[t+4]]+n[e[t+5]]+"-"+n[e[t+6]]+n[e[t+7]]+"-"+n[e[t+8]]+n[e[t+9]]+"-"+n[e[t+10]]+n[e[t+11]]+n[e[t+12]]+n[e[t+13]]+n[e[t+14]]+n[e[t+15]]).toLowerCase()}t.unsafeStringify=s,t.default=function(e,t=0){const r=s(e,t);if(!(0,o.default)(r))throw TypeError("Stringified UUID is invalid");return r}},6076:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.messageType=void 0;var o,n=(o=r(6935))&&o.__esModule?o:{default:o};t.messageType=n.default.shape({id:n.default.string,message:n.default.string,type:n.default.oneOf(["error","info","success","warning"])})},6177:function(e){"use strict";e.exports=Config},6356:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=r(6011),n=r(1425),s=r(6568);t.default=function(e,t,r){e??={},r??=0;let i=(0,n.default)({...e,_v6:!0},new Uint8Array(16));if(i=(0,s.default)(i),t){for(let e=0;e<16;e++)t[r+e]=i[e];return t}return(0,o.unsafeStringify)(i)}},6568:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=r(1797),n=r(6011);t.default=function(e){const t=function(e){return Uint8Array.of((15&e[6])<<4|e[7]>>4&15,(15&e[7])<<4|(240&e[4])>>4,(15&e[4])<<4|(240&e[5])>>4,(15&e[5])<<4|(240&e[0])>>4,(15&e[0])<<4|(240&e[1])>>4,(15&e[1])<<4|(240&e[2])>>4,96|15&e[2],e[3],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}("string"==typeof e?(0,o.default)(e):e);return"string"==typeof e?(0,n.unsafeStringify)(t):t}},6697:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i},6923:function(e){"use strict";e.exports=classnames},6935:function(e){"use strict";e.exports=PropTypes},6937:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Component=void 0;var o=function(e,t){if("function"==typeof WeakMap)var r=new WeakMap,o=new WeakMap;return function(e,t){if(!t&&e&&e.__esModule)return e;var n,s,i={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return i;if(n=t?o:r){if(n.has(e))return n.get(e);n.set(e,i)}for(const t in e)"default"!==t&&{}.hasOwnProperty.call(e,t)&&((s=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(s.get||s.set)?n(i,t,s):i[t]=e[t]);return i}(e,t)}(r(1594)),n=p(r(6935)),s=p(r(6923)),i=p(r(5815)),a=r(9040),l=r(9367),u=r(5207),d=r(6076),c=r(1339),f=r(2348);function p(e){return e&&e.__esModule?e:{default:e}}class m extends o.PureComponent{getClassNames(){const{extraClass:e,showHeader:t}=this.props;return(0,s.default)(e,{table:!0,"history-viewer__table--headerless":!t})}isVersionActive(e){const{currentVersion:t,compare:r,compare:{versionFrom:o,versionTo:n}}=this.props,s=t&&t.version===e.version,i=o&&o.version===e.version,a=n&&n.version===e.version;return!r&&s||i||a}renderMessages(){const{FormAlertComponent:e,messages:t}=this.props;return t.length?o.default.createElement("div",{className:"history-viewer__messages"},t.map(t=>o.default.createElement(e,{key:t.id,type:t.type,value:t.message,closeLabel:i.default._t("HistoryViewerVersionList.CLOSE","Close")}))):null}renderHeader(){const{showHeader:e,HeadingComponent:t,compareModeAvailable:r}=this.props;if(!e)return null;const n={compareModeAvailable:r};return o.default.createElement(t,n)}render(){const{VersionComponent:e,versions:t,compareModeAvailable:r,compare:n}=this.props;return o.default.createElement("div",{className:"history-viewer__list"},this.renderMessages(),o.default.createElement("ul",{className:this.getClassNames(),role:"table"},this.renderHeader(),t.map(t=>o.default.createElement(e,{key:t.version,isActive:this.isVersionActive(t),version:t,compare:n,compareModeAvailable:r}))))}}t.Component=m,m.propTypes={extraClass:n.default.oneOfType([n.default.string,n.default.array,n.default.object]),showHeader:n.default.bool,FormAlertComponent:n.default.elementType.isRequired,HeadingComponent:n.default.elementType.isRequired,messages:n.default.arrayOf(d.messageType),VersionComponent:n.default.elementType.isRequired,versions:n.default.arrayOf(c.versionType),compare:f.compareType,compareModeAvailable:n.default.bool},m.defaultProps={compareModeAvailable:!0,extraClass:"history-viewer__table",messages:[],showHeader:!0,versions:[]};t.default=(0,l.compose)((0,a.connect)(function(e){const{messages:t,compare:r,currentVersion:o}=e.versionedAdmin.historyViewer;return{messages:t,compare:r,currentVersion:o}}),(0,u.inject)(["FormAlert","HistoryViewerHeading","HistoryViewerVersion"],(e,t,r)=>({FormAlertComponent:e,HeadingComponent:t,VersionComponent:r}),()=>"VersionedAdmin.HistoryViewer.HistoryViewerVersionList"))(m)},7008:function(e){"use strict";e.exports=NodeUrl},7089:function(e){"use strict";e.exports=Loading},7675:function(e){"use strict";e.exports=qs},7900:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Component=void 0;var o=function(e,t){if("function"==typeof WeakMap)var r=new WeakMap,o=new WeakMap;return function(e,t){if(!t&&e&&e.__esModule)return e;var n,s,i={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return i;if(n=t?o:r){if(n.has(e))return n.get(e);n.set(e,i)}for(const t in e)"default"!==t&&{}.hasOwnProperty.call(e,t)&&((s=(n=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(s.get||s.set)?n(i,t,s):i[t]=e[t]);return i}(e,t)}(r(1594)),n=l(r(6935)),s=r(9040),i=l(r(5815)),a=r(5525);function l(e){return e&&e.__esModule?e:{default:e}}class u extends o.Component{constructor(e){super(e),this.handleDismissCompare=this.handleDismissCompare.bind(this)}handleDismissCompare(){this.props.onDismissCompare()}render(){return this.props.isCompare?o.default.createElement("div",{className:"history-viewer__compare-notice alert alert-info"},o.default.createElement("span",{className:"notice-message"},o.default.createElement("strong",null,i.default._t("HistoryViewer.COMPARE_MODE","Compare mode"),": "),i.default._t("HistoryViewer.SELECT_PROMPT","Select two versions")),o.default.createElement("button",{className:"btn dismiss-button font-icon-cancel",onClick:this.handleDismissCompare},i.default._t("HistoryViewer.EXIT","Exit"))):null}}t.Component=u,u.propTypes={isCompare:n.default.bool.isRequired};t.default=(0,s.connect)(function(e){const{compare:t}=e.versionedAdmin.historyViewer;return{isCompare:!!t}},function(e){return{onDismissCompare(){e((0,a.setCompareMode)(!1))}}})(u)},8123:function(e){"use strict";e.exports=moment},8286:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=r(3779),n=r(2291),s=r(6011);t.default=function(e,t,r){if(o.default.randomUUID&&!t&&!e)return o.default.randomUUID();const i=(e=e||{}).random??e.rng?.()??(0,n.default)();if(i.length<16)throw new Error("Random bytes length must be >= 16");if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){if((r=r||0)<0||r+16>t.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[r+e]=i[e];return t}return(0,s.unsafeStringify)(i)}},8330:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e=i,{type:t,payload:r}={}){switch(t){case s.default.SET_CURRENT_PAGE:return{...e,currentPage:r.page};case s.default.SHOW_VERSION:return{...e,currentVersion:r.version};case s.default.SHOW_LIST:return{...e,currentVersion:0,currentPage:0};case s.default.ADD_MESSAGE:return{...e,messages:[r,...e.messages]};case s.default.CLEAR_MESSAGES:return{...e,messages:[]};case s.default.SET_COMPARE_MODE:{const t={versionFrom:!1,versionTo:!1,...e.compare};return{...e,compare:!!r.enabled&&t}}case s.default.SET_COMPARE_FROM:{let{compare:{versionFrom:t,versionTo:o}}=e;return t=r.version||!1,t||(t=o,o=!1),{...e,currentVersion:t,compare:{versionFrom:t,versionTo:o}}}case s.default.SET_COMPARE_TO:{let{compare:{versionFrom:t,versionTo:o}}=e;return o=r.version||!1,o&&t&&o.version<t.version&&(t=o,o=e.compare.versionFrom),{...e,currentVersion:t,compare:{versionFrom:t,versionTo:o}}}default:return e}};var o,n=r(2348),s=(o=r(2413))&&o.__esModule?o:{default:o};const i={currentPage:1,currentVersion:!1,compare:n.defaultCompare,loading:!1,messages:[]}},8918:function(e){"use strict";e.exports=ToastsActions},9032:function(e){"use strict";e.exports=ViewModeActions},9040:function(e){"use strict";e.exports=ReactRedux},9367:function(e){"use strict";e.exports=Redux},9746:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=r(6697);t.default=function(e){return"string"==typeof e&&o.default.test(e)}},9786:function(e,t,r){"use strict";var o,n=(o=r(1669))&&o.__esModule?o:{default:o},s=r(5125);n.default.entwine("ss",e=>{e(".ArchiveAdmin__action--restore").entwine({onmatch(){e(this).attr("readonly",!1),e(this).attr("disabled",!1)}}),e(".ArchiveAdmin .other-model-selector select").entwine({onchange(t){t.preventDefault();let r=e(this).val();const o=e(this).data("others-archive-url");if(r){r=r.replace(/\\/g,"-");const t=(0,s.joinUrlPaths)(o,r);e(".cms-container").loadPanel(t,"",{pjax:"CurrentForm"})}}})})},9923:function(e){"use strict";e.exports=ResizeAware}},t={};function r(o){var n=t[o];if(void 0!==n)return n.exports;var s=t[o]={exports:{}};return e[o](s,s.exports,r),s.exports}r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),function(){"use strict";r(1312),r(4506),r(9786),r(5140),r(5086),r(2038)}()}();