!function(){"use strict";var e={38:function(e,t,n){var a,s=(a=n(121))&&a.__esModule?a:{default:a};window.document.addEventListener("DOMContentLoaded",()=>{(0,s.default)()})},40:function(e){e.exports=ReactRedux},78:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Component=f,t.default=void 0;var a=c(n(935)),s=function(e,t){if("function"==typeof WeakMap)var n=new WeakMap,a=new WeakMap;return function(e,t){if(!t&&e&&e.__esModule)return e;var s,o,u={__proto__:null,default:e};if(null===e||"object"!=typeof e&&"function"!=typeof e)return u;if(s=t?a:n){if(s.has(e))return s.get(e);s.set(e,u)}for(const t in e)"default"!==t&&{}.hasOwnProperty.call(e,t)&&((o=(s=Object.defineProperty)&&Object.getOwnPropertyDescriptor(e,t))&&(o.get||o.set)?s(u,t,o):u[t]=e[t]);return u}(e,t)}(n(594)),o=n(40),u=c(n(609)),r=c(n(177)),l=n(918),i=c(n(815)),d=c(n(345));function c(e){return e&&e.__esModule?e:{default:e}}function f(e){const[t,n]=(0,s.useState)(!1),[a,o]=(0,s.useState)(!1),[l,c]=(0,s.useState)(!1);const{ID:f,...p}=e,g={logout:function(){var t;return c(!0),(t=e.LogOutEndpoint,u.default.createEndpointFetcher({url:`${t}/:id`.replace("//","/"),method:"delete",payloadSchema:{id:{urlReplacement:":id",remove:!0},SecurityID:{querystring:!0}}}))({id:e.ID,SecurityID:r.default.get("SecurityID")}).then(t=>{e.displayToastSuccess(t.message)}).catch(t=>(o(!0),t.response.text().then(t=>{const n=JSON.parse(t);return"object"!=typeof n||"string"!=typeof n.message?Promise.reject("No readable error message"):(e.displayToastFailure(n.message),Promise.resolve())}))).catch(()=>{e.displayToastFailure(i.default._t("SessionManager.COULD_NOT_LOGOUT","Could not log out of session. Try again later."))}).finally(()=>{n(!0),c(!1)})},complete:t,failed:a,submitting:l,...p};return s.default.createElement(d.default,g)}f.propTypes={ID:a.default.number.isRequired,LogOutEndpoint:a.default.string.isRequired,displayToastSuccess:a.default.func.isRequired,displayToastFailure:a.default.func.isRequired,IPAddress:a.default.string.isRequired,IsCurrent:a.default.bool,UserAgent:a.default.string,Created:a.default.string.isRequired,LastAccessed:a.default.string.isRequired};t.default=(0,o.connect)(()=>({}),function(e){return{displayToastSuccess(t){e((0,l.success)(t))},displayToastFailure(t){e((0,l.error)(t))}}})(f)},121:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(345)),s=r(n(78)),o=r(n(889)),u=r(n(207));function r(e){return e&&e.__esModule?e:{default:e}}t.default=()=>{u.default.component.registerMany({LoginSession:a.default,LoginSessionContainer:s.default,SessionManagerField:o.default})}},123:function(e){e.exports=moment},145:function(e){e.exports=ReactDomClient},177:function(e){e.exports=Config},207:function(e){e.exports=Injector},345:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=l(n(815)),s=l(n(935)),o=l(n(594)),u=l(n(123)),r=l(n(551));function l(e){return e&&e.__esModule?e:{default:e}}const i="L LT";function d(e){const t=a.default._t("SessionManager.CURRENT","Current"),n=e.submitting||e.complete&&!e.failed?a.default._t("SessionManager.LOGGING_OUT","Logging out..."):a.default._t("SessionManager.LOG_OUT","Log out");return o.default.createElement("div",{className:"login-session "+(e.complete&&!e.failed?"hidden":"")},o.default.createElement("p",null,e.UserAgent),o.default.createElement("p",{className:"text-muted"},e.IPAddress,function(){u.default.locale(a.default.detectLocale());const t=u.default.utc(e.Created).local(),n=u.default.utc(e.LastAccessed).local(),s=t.fromNow(),r=n.fromNow(),l=a.default.inject(a.default._t("Admin.ACTIVITY_TOOLTIP_TEXT","Signed in {signedIn}, Last active {lastActive}"),{signedIn:t.format(i),lastActive:n.format(i)}),d=e.IsCurrent?a.default.inject(a.default._t("SessionManager.AUTHENTICATED","authenticated {createdElapsed}..."),{createdElapsed:s}):a.default.inject(a.default._t("SessionManager.LAST_ACTIVE","last active {lastAccessedElapsed}..."),{lastAccessedElapsed:r});return o.default.createElement("span",{"data-bs-toggle":"tooltip","data-placement":"top",title:l},", ",d)}()),o.default.createElement("p",null,e.IsCurrent&&o.default.createElement("strong",{className:"text-success"},t),!e.IsCurrent&&o.default.createElement(r.default,{color:"link",className:"login-session__logout",onClick:()=>{e.submitting||e.complete||e.logout()}},n)))}d.propTypes={IPAddress:s.default.string.isRequired,IsCurrent:s.default.bool,UserAgent:s.default.string,Created:s.default.string.isRequired,LastAccessed:s.default.string.isRequired,submitting:s.default.bool.isRequired,complete:s.default.bool.isRequired,failed:s.default.bool.isRequired};t.default=d},551:function(e){e.exports=Button},594:function(e){e.exports=React},602:function(e,t,n){var a=r(n(594)),s=n(145),o=n(207),u=r(n(669));function r(e){return e&&e.__esModule?e:{default:e}}u.default.entwine("ss",e=>{e('.js-injector-boot [data-field-type="session-manager-field"]').entwine({onmatch(){!function(e){const t=(0,o.loadComponent)("SessionManagerField"),{schema:{loginSessions:n}}=e.data("schema");(0,s.createRoot)(e[0]).render(a.default.createElement(t,{loginSessions:n}))}(this)}})})},609:function(e){e.exports=Backend},669:function(e){e.exports=jQuery},815:function(e){e.exports=i18n},889:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=u(n(594)),s=u(n(935)),o=u(n(78));function u(e){return e&&e.__esModule?e:{default:e}}function r(e){return a.default.createElement("ul",{className:"session-manager-field list-unstyled"},e.loginSessions.map(e=>a.default.createElement("li",{key:e.ID,className:"list-unstyled"},a.default.createElement(o.default,e))))}r.propTypes={loginSessions:s.default.arrayOf(o.default.propTypes)};t.default=r},918:function(e){e.exports=ToastsActions},935:function(e){e.exports=PropTypes},965:function(e,t,n){n(602)}},t={};function n(a){var s=t[a];if(void 0!==s)return s.exports;var o=t[a]={exports:{}};return e[a](o,o.exports,n),o.exports}n(965),n(38)}();